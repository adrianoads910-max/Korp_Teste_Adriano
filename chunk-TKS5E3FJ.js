import{a as P,b as q,e as M,g as E,h as I,i as F}from"./chunk-P2PZAMAP.js";import{b as T}from"./chunk-COK4W544.js";import{Ba as C,Fa as u,La as m,Ma as i,Na as t,Pa as v,Qa as c,Ra as p,Ua as n,Va as y,Wa as N,X as _,Y as h,Ya as g,Za as f,_a as b,pa as s,qb as w,rb as k,sb as S,xa as x}from"./chunk-MMYL3GOO.js";function W(d,a){if(d&1){let e=v();i(0,"li",14)(1,"span",15)(2,"b"),n(3),t(),n(4),t(),i(5,"button",16),c("click",function(){let l=_(e).index,r=p(2);return h(r.removerItem(l))}),n(6," Remover "),t()()}if(d&2){let e=a.$implicit;s(3),y(e.codigoProduto),s(),N(" \u2014 ",e.quantidade," unidade(s) ")}}function A(d,a){if(d&1&&(i(0,"div",10)(1,"h3",11),n(2,"Itens da Nota:"),t(),i(3,"ul",12),u(4,W,7,2,"li",13),t()()),d&2){let e=p();s(4),m("ngForOf",e.itens)}}var V=class d{constructor(a){this.notasService=a}codigoProduto="";quantidade=1;itens=[];adicionarItem(){if(!this.codigoProduto||this.quantidade<=0){alert("Preencha c\xF3digo e quantidade.");return}this.itens.push({codigoProduto:this.codigoProduto,quantidade:this.quantidade}),this.codigoProduto="",this.quantidade=1}removerItem(a){this.itens.splice(a,1)}salvar(){if(this.itens.length===0){alert("Adicione pelo menos 1 item!");return}let a={status:0,itens:this.itens};this.notasService.criar(a).subscribe({next:e=>{alert(`\u2705 Nota criada! N\xFAmero: ${e.numero}`),this.itens=[],this.codigoProduto="",this.quantidade=1},error:e=>{console.error("Erro ao criar nota:",e),alert("\u274C Erro ao criar nota: "+(e?.error?.erro??e.message))}})}static \u0275fac=function(e){return new(e||d)(x(T))};static \u0275cmp=C({type:d,selectors:[["app-cadastro-nota"]],decls:17,vars:4,consts:[[1,"max-w-xl","mx-auto","bg-white","dark:bg-gray-800","p-6","rounded-lg","shadow-md"],[1,"text-2xl","font-bold","mb-6","dark:text-white"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-col","gap-1"],[1,"text-gray-700","dark:text-gray-300","font-medium"],["type","text","name","codigoProduto","required","",1,"border","rounded-md","px-3","py-2","dark:bg-gray-700","dark:text-white","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","number","name","quantidade","required","",1,"border","rounded-md","px-3","py-2","dark:bg-gray-700","dark:text-white","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","button",1,"bg-green-600","hover:bg-green-700","text-white","font-semibold","px-4","py-2","rounded-md","transition-colors",3,"click"],["class","mt-6",4,"ngIf"],[1,"w-full","mt-6","bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-4","py-2","rounded-md","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"mt-6"],[1,"text-lg","font-semibold","mb-2","dark:text-white"],[1,"space-y-2"],["class","flex justify-between items-center bg-gray-100 dark:bg-gray-700 p-3 rounded-md",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","bg-gray-100","dark:bg-gray-700","p-3","rounded-md"],[1,"dark:text-white"],[1,"text-red-600","font-semibold","hover:underline",3,"click"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"h2",1),n(2,"Nova Nota Fiscal"),t(),i(3,"div",2)(4,"div",3)(5,"label",4),n(6,"C\xF3digo do Produto"),t(),i(7,"input",5),b("ngModelChange",function(r){return f(o.codigoProduto,r)||(o.codigoProduto=r),r}),t()(),i(8,"div",3)(9,"label",4),n(10,"Quantidade"),t(),i(11,"input",6),b("ngModelChange",function(r){return f(o.quantidade,r)||(o.quantidade=r),r}),t()(),i(12,"button",7),c("click",function(){return o.adicionarItem()}),n(13," \u2795 Adicionar Produto "),t()(),u(14,A,5,1,"div",8),i(15,"button",9),c("click",function(){return o.salvar()}),n(16," \u2705 Criar Nota Fiscal "),t()()),e&2&&(s(7),g("ngModel",o.codigoProduto),s(4),g("ngModel",o.quantidade),s(3),m("ngIf",o.itens.length>0),s(),m("disabled",o.itens.length===0))},dependencies:[F,P,E,q,I,M,S,w,k],encapsulation:2})};export{V as CadastroNotaComponent};
