<div class="max-w-5xl mx-auto p-6">

  <h2 class="text-3xl font-bold mb-6 dark:text-white">Notas Fiscais</h2>

  <table class="min-w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">

    <thead class="bg-gray-200 dark:bg-gray-700 text-left text-gray-700 dark:text-gray-200">
      <tr>
        <th class="px-4 py-3">Número</th>
        <th class="px-4 py-3">Status</th>
        <th class="px-4 py-3">Itens</th>
        <th class="px-4 py-3 text-center">Ações</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let n of notas"
          class="border-t dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition">

        <!-- Número -->
        <td class="px-4 py-3 font-semibold dark:text-white">
          {{ n.numero }}
        </td>

        <!-- STATUS: Badge com cor por enum -->
        <td class="px-4 py-3">
          <span
            class="px-3 py-1 rounded-full text-sm font-semibold"
            [ngClass]="{
              'bg-green-100 text-green-700': n.status === StatusNota.Fechada,
              'bg-yellow-100 text-yellow-700': n.status === StatusNota.Aberta,
              'bg-red-100 text-red-700': n.status === StatusNota.Cancelado
            }"
          >
            ● {{
              n.status === StatusNota.Aberta
                ? 'Aberta'
                : n.status === StatusNota.Fechada
                  ? 'Fechada'
                  : 'Cancelada'
            }}
          </span>
        </td>

        <!-- ITENS -->
        <td class="px-4 py-3 dark:text-gray-200">
          <ul class="list-disc ml-5 space-y-1">
            <li *ngFor="let item of n.itens">
              {{ item.codigoProduto }} (Qtd: {{ item.quantidade }})
            </li>
          </ul>
        </td>

        <!-- AÇÕES -->
        <td class="px-4 py-3 flex items-center gap-3 justify-center">

          <!-- IMPRIMIR -->
          <button
            class="px-3 py-1 text-sm font-semibold rounded-lg bg-blue-600 text-white
                   hover:bg-blue-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed"
            (click)="imprimir(n.numero!)"
            [disabled]="n.status !== StatusNota.Aberta"
          >
            Imprimir
          </button>

          <!-- CANCELAR -->
          <button
            class="px-3 py-1 text-sm font-semibold rounded-lg bg-red-600 text-white
                   hover:bg-red-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed"
            (click)="cancelar(n.numero!)"
            [disabled]="n.status !== StatusNota.Aberta"
          >
            Cancelar
          </button>

        </td>
      </tr>
    </tbody>

  </table>

</div>
